import React, { useState } from 'react';
import menuData from '../data/menuData';
import DishCard from '../components/DishCard';
import bannerImage from '../assets/Week-end-banner.jpg';
import './ChefConcept.css';

const accompaniments = [
  'Riz blanc',
  'Riz saut√©',
  'Frites de Patate douce',
  'Atieke',
  'Frites de plantain',
  'Chikwangue',
  'B√¢ton de manioc'
];

const ChefConcept: React.FC = () => {
  const chefDishes = menuData.filter(dish => dish.category === "Concept du Chef");

  const [choices, setChoices] = useState<{ [key: number]: { accompaniment: string, withDrink: boolean } }>({});

  const handleChange = (dishId: number, field: 'accompaniment' | 'withDrink', value: string | boolean) => {
    setChoices(prev => ({
      ...prev,
      [dishId]: {
        ...prev[dishId],
        [field]: value
      }
    }));
  };

  return (
    <div className="chef-concept-container">
      <div className="chef-banner">
        <img src={bannerImage} alt="Banni√®re Concept du Chef" className="banner-image" />
        <div className="banner-overlay" />
        <div className="banner-content">
          <h1>‚ú® Concept du Chef ‚ú®</h1>
          <p className='surprise'>Laissez-vous surprendre par des cr√©ations uniques, pens√©es pour √©veiller vos papilles !</p>
        </div>
      </div>

      <div className="dishes-section">
        <div className="dishes-grid">
          {chefDishes.length === 0 && <p>Le chef mijote encore... Revenez bient√¥t !</p>}
          {chefDishes.map((dish) => {
            const withDrink = choices[dish.id]?.withDrink || false;
            const price = dish.price + (withDrink ? 0.9 : 0);
            return (
              <div key={dish.id} className="dish-card-with-options">
                <DishCard
                  dish={dish}
                  showQuantityControls={true}
                  isChefConcept={true}
                  medalColor="#DAA520"
                />

                <div className="extra-options">
                  <label className="extra-label">
                    ü•ó Accompagnement :
                    <select
                      value={choices[dish.id]?.accompaniment || ''}
                      onChange={(e) => handleChange(dish.id, 'accompaniment', e.target.value)}
                    >
                      <option value="">-- S√©lectionner --</option>
                      {accompaniments.map(acc => (
                        <option key={acc} value={acc}>{acc}</option>
                      ))}
                    </select>
                  </label>

                  <label className="checkbox-label">
                    <input
                      type="checkbox"
                      checked={withDrink}
                      onChange={(e) => handleChange(dish.id, 'withDrink', e.target.checked)}
                    />
                    Ajouter une boisson (+0,90 ‚Ç¨)
                  </label>

                  <p className="price-display">Prix total : <strong>{price.toFixed(2)} ‚Ç¨</strong></p>
                </div>
              </div>
            );
          })}
        </div>
      </div>
    </div>
  );
};

export default ChefConcept;
